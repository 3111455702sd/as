
import base64

encoded_script = "aW1wb3J0IG9zCmltcG9ydCByZQoKb2Zmc2V0X2FkanVzdG1lbnQgPSAwCm1vZGlmeV9ieXRlc19jb3VudCA9IDQKCmRlZiBkZWNfdG9faGV4KG51bSk6CiAgICB0cnk6CiAgICAgICAgaGV4X3N0ciA9IGZvcm1hdChudW0sICcwOFgnKQogICAgICAgIHJldHVybiBoZXhfc3RyWzY6OF0gKyBoZXhfc3RyWzQ6Nl0gKyBoZXhfc3RyWzI6NF0gKyBoZXhfc3RyWzA6Ml0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIui9rOaNouWNgei/m+WItuWIsOWNgeWFrei/m+WItuaXtuWPkeeUn+mUmeivrzoge2V9IikKICAgICAgICByZXR1cm4gTm9uZQoKZGVmIHByb2Nlc3NfY29uZmlnX2ZpbGUoZmlsZW5hbWUpOgogICAgdHJ5OgogICAgICAgIHByb2Nlc3NlZF9saW5lcyA9IFtdCiAgICAgICAgd2l0aCBvcGVuKGZpbGVuYW1lLCAncicsIGVuY29kaW5nPSd1dGYtOCcpIGFzIGZpbGU6CiAgICAgICAgICAgIGZvciBsaW5lIGluIGZpbGU6CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGxpbmUgPSBsaW5lLnNwbGl0KCcjJylbMF0uc3RyaXAoKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiBub3QgbGluZToKICAgICAgICAgICAgICAgICAgICBjb250aW51ZSAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiByZS5tYXRjaChyJ15cZCtccytcZCskJywgbGluZSk6CiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkX2xpbmVzLmFwcGVuZChsaW5lKQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiAiWyIgaW4gbGluZSBhbmQgIl0iIGluIGxpbmU6CiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSBsaW5lLmZpbmQoIlsiKSArIDEKICAgICAgICAgICAgICAgICAgICBlbmQgPSBsaW5lLmZpbmQoIl0iKQogICAgICAgICAgICAgICAgICAgIG51bWJlcnMgPSBsaW5lW3N0YXJ0OmVuZF0uc3BsaXQoIiwiKQogICAgICAgICAgICAgICAgICAgIGlmIGxlbihudW1iZXJzKSA9PSAyOgogICAgICAgICAgICAgICAgICAgICAgICBudW0xLCBudW0yID0gbnVtYmVyc1swXS5zdHJpcCgpLCBudW1iZXJzWzFdLnN0cmlwKCkKICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkX2xpbmVzLmFwcGVuZChmIntudW0xfSB7bnVtMn0iKQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgcHJvY2Vzc2VkX2xpbmUgPSByZS5zdWIocidbXlxkXHNdJywgJycsIGxpbmUpCiAgICAgICAgICAgICAgICBpZiBwcm9jZXNzZWRfbGluZS5zdHJpcCgpOiAgIyDnoa7kv53muIXnkIblkI7ooYzkuI3kuLrnqboKICAgICAgICAgICAgICAgICAgICBwcm9jZXNzZWRfbGluZXMuYXBwZW5kKHByb2Nlc3NlZF9saW5lLnN0cmlwKCkpCiAgICAgICAgcmV0dXJuIHByb2Nlc3NlZF9saW5lcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGYi5peg5rOV6K+75Y+W6YWN572u5paH5Lu2IHtmaWxlbmFtZX06IHtlfSIpCiAgICAgICAgcmV0dXJuIFtdCgpkZWYgcmVhZF9maWxlX2NvbnRlbnQoZmlsZV9wYXRoKToKICAgIHRyeToKICAgICAgICB3aXRoIG9wZW4oZmlsZV9wYXRoLCAicmIiKSBhcyBmaWxlOgogICAgICAgICAgICByZXR1cm4gYnl0ZWFycmF5KGZpbGUucmVhZCgpKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGYi5peg5rOV6K+75Y+W5paH5Lu2IHtmaWxlX3BhdGh9OiB7ZX0iKQogICAgICAgIHJldHVybiBOb25lCgpkZWYgZmluZF9oZXhfc2VxdWVuY2UoZmlsZV9jb250ZW50LCBoZXhfc2VxdWVuY2UpOgogICAgb2Zmc2V0cyA9IFtdCiAgICBzdGFydCA9IDAKICAgIHNlcXVlbmNlX2J5dGVzID0gYnl0ZXMuZnJvbWhleChoZXhfc2VxdWVuY2UpCiAgICB3aGlsZSBzdGFydCA8IGxlbihmaWxlX2NvbnRlbnQpOgogICAgICAgIG9mZnNldCA9IGZpbGVfY29udGVudC5maW5kKHNlcXVlbmNlX2J5dGVzLCBzdGFydCkKICAgICAgICBpZiBvZmZzZXQgPT0gLTE6CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgb2Zmc2V0cy5hcHBlbmQob2Zmc2V0KQogICAgICAgIHN0YXJ0ID0gb2Zmc2V0ICsgbGVuKHNlcXVlbmNlX2J5dGVzKQogICAgcmV0dXJuIG9mZnNldHMKCmRlZiByZXBsYWNlX2J5dGVzKGZpbGVfcGF0aCwgb2Zmc2V0LCBuZXdfYnl0ZXMpOgogICAgdHJ5OgogICAgICAgIHdpdGggb3BlbihmaWxlX3BhdGgsICJyK2IiKSBhcyBmaWxlOgogICAgICAgICAgICBmaWxlLnNlZWsob2Zmc2V0KQogICAgICAgICAgICBmaWxlLndyaXRlKG5ld19ieXRlcykKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIuaXoOazleWGmeWFpeaWh+S7tiB7ZmlsZV9wYXRofToge2V9IikKCmRlZiBwcm9jZXNzX3RhcmdldF9maWxlcyhjb25maWdfZGF0YSwgdGFyZ2V0X2ZpbGVfcGF0aCk6CiAgICBpZiBub3QgY29uZmlnX2RhdGE6CiAgICAgICAgcHJpbnQoZiLplJnor686IOmFjee9ruaWh+S7tuaVsOaNruS4uuepuu+8jOaXoOazleWkhOeQhuaWh+S7tiB7dGFyZ2V0X2ZpbGVfcGF0aH0iKQogICAgICAgIHJldHVybiAwLCAwLCAwCgogICAgZmlsZV9jb250ZW50ID0gcmVhZF9maWxlX2NvbnRlbnQodGFyZ2V0X2ZpbGVfcGF0aCkKICAgIGlmIGZpbGVfY29udGVudCBpcyBOb25lOgogICAgICAgIHJldHVybiAwLCAwLCAwCgogICAgdG90YWxfcGFpcnMgPSBmb3VuZF9jb3VudCA9IG5vdF9mb3VuZF9jb3VudCA9IDAKCiAgICBmb3IgbGluZSBpbiBjb25maWdfZGF0YToKICAgICAgICBwYWlycyA9IGxpbmUuc3BsaXQoKQogICAgICAgIGlmIGxlbihwYWlycykgIT0gMjoKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgdG90YWxfcGFpcnMgKz0gMQogICAgICAgIHRyeToKICAgICAgICAgICAgY2xlYW5lZF9wYWlycyA9IFtyZS5zdWIocidcRCcsICcnLCBwYWlyKSBmb3IgcGFpciBpbiBwYWlyc10KICAgICAgICAgICAgaGV4X3BhaXIxLCBoZXhfcGFpcjIgPSBtYXAobGFtYmRhIHg6IGRlY190b19oZXgoaW50KHgpKSwgY2xlYW5lZF9wYWlycykKICAgICAgICBleGNlcHQgVmFsdWVFcnJvciBhcyBlOgogICAgICAgICAgICBwcmludChmIumFjee9ruaWh+S7tuS4reeahOS4gOihjOaXoOazlei9rOaNouS4uuaVtOaVsDoge3BhaXJzfS4g6ZSZ6K+vOiB7ZX0iKQogICAgICAgICAgICBub3RfZm91bmRfY291bnQgKz0gMQogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICBpZiBoZXhfcGFpcjEgaXMgTm9uZSBvciBoZXhfcGFpcjIgaXMgTm9uZToKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgb2Zmc2V0czEsIG9mZnNldHMyID0gZmluZF9oZXhfc2VxdWVuY2UoZmlsZV9jb250ZW50LCBoZXhfcGFpcjEpLCBmaW5kX2hleF9zZXF1ZW5jZShmaWxlX2NvbnRlbnQsIGhleF9wYWlyMikKCiAgICAgICAgaWYgb2Zmc2V0czEgYW5kIG9mZnNldHMyOgogICAgICAgICAgICBmb3Igb2Zmc2V0MSwgb2Zmc2V0MiBpbiB6aXAob2Zmc2V0czEsIG9mZnNldHMyKToKICAgICAgICAgICAgICAgIHN0YXJ0X3BvczEgPSBtYXgob2Zmc2V0MSAtIG9mZnNldF9hZGp1c3RtZW50LCAwKQogICAgICAgICAgICAgICAgc3RhcnRfcG9zMiA9IG1heChvZmZzZXQyIC0gb2Zmc2V0X2FkanVzdG1lbnQsIDApCiAgICAgICAgICAgICAgICBwcmV2X2J5dGVzMSA9IGZpbGVfY29udGVudFtzdGFydF9wb3MxOnN0YXJ0X3BvczEgKyBtb2RpZnlfYnl0ZXNfY291bnRdCiAgICAgICAgICAgICAgICBwcmV2X2J5dGVzMiA9IGZpbGVfY29udGVudFtzdGFydF9wb3MyOnN0YXJ0X3BvczIgKyBtb2RpZnlfYnl0ZXNfY291bnRdCiAgICAgICAgICAgICAgICByZXBsYWNlX2J5dGVzKHRhcmdldF9maWxlX3BhdGgsIHN0YXJ0X3BvczEsIHByZXZfYnl0ZXMyKQogICAgICAgICAgICAgICAgcmVwbGFjZV9ieXRlcyh0YXJnZXRfZmlsZV9wYXRoLCBzdGFydF9wb3MyLCBwcmV2X2J5dGVzMSkKICAgICAgICAgICAgZm91bmRfY291bnQgKz0gbGVuKG9mZnNldHMxKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG5vdF9mb3VuZF9jb3VudCArPSAxCgogICAgcmV0dXJuIHRvdGFsX3BhaXJzLCBmb3VuZF9jb3VudCwgbm90X2ZvdW5kX2NvdW50CgpkZWYgcHJpbnRfaW50cm8oKToKICAgIGludHJvID0gIiIiCiAgICBb5ZCv5Yqo5oiQ5YqfXQogICAg5q2j5Zyo5Yqg6L296YWN572u5paH5Lu2Li4uCiAgICDpgInmi6nlubblpITnkIbnm67moIfmlofku7bkuK0uLgogICAg5rOo5oSP77ya6K+35oqK6KaB5LiA6ZSu576O5YyW55qEZGF05paH5Lu25pS+5YWlIuaJk+WMhWRhdCLmlofku7blpLkhISEKICAgIOazqOaEj++8muivt+aKiuimgeS4gOmUrue+juWMlueahGRhdOaWh+S7tuaUvuWFpSLmiZPljIVkYXQi5paH5Lu25aS5ISEhCiAgICDms6jmhI/vvJror7fmioropoHkuIDplK7nvo7ljJbnmoRkYXTmlofku7bmlL7lhaUi5omT5YyFZGF0IuaWh+S7tuWkuSEhIQogICAgIiIiCiAgICBwcmludChpbnRybykKCmRlZiBwcmludF9zdGF0dXNfdXBkYXRlKG1lc3NhZ2UpOgogICAgcHJpbnQoZiJb54q25oCB5pu05pawXSB7bWVzc2FnZX0iKQoKZGVmIG1haW4oKToKICAgIHByaW50X2ludHJvKCkKCiAgICB0YXJnZXRfZGlyID0gb3MucGF0aC5hYnNwYXRoKG9zLnBhdGguam9pbihvcy5nZXRjd2QoKSwgIuaJk+WMhWRhdCIpKQogICAgY29uZmlnX2RpciA9IG9zLnBhdGguYWJzcGF0aChvcy5wYXRoLmpvaW4ob3MuZ2V0Y3dkKCksICLphY3nva7mlofku7YiKSkKICAgIAogICAgaWYgbm90IG9zLnBhdGguZXhpc3RzKHRhcmdldF9kaXIpOgogICAgICAgIHByaW50KGYi6ZSZ6K+vOiDmib7kuI3liLDnm67lvZUge3RhcmdldF9kaXJ9IikKICAgICAgICByZXR1cm4KICAgIAogICAgaWYgbm90IG9zLnBhdGguZXhpc3RzKGNvbmZpZ19kaXIpOgogICAgICAgIHByaW50KGYi6ZSZ6K+vOiDmib7kuI3liLDphY3nva7mlofku7bnm67lvZUge2NvbmZpZ19kaXJ9IikKICAgICAgICByZXR1cm4KICAgIAogICAgc3VwcG9ydGVkX2V4dGVuc2lvbnMgPSBbJy5oJywgJy5weScsICcudHh0J10KICAgIGNvbmZpZ19maWxlcyA9IFtmIGZvciBmIGluIG9zLmxpc3RkaXIoY29uZmlnX2RpcikgaWYgYW55KGYuZW5kc3dpdGgoZXh0KSBmb3IgZXh0IGluIHN1cHBvcnRlZF9leHRlbnNpb25zKV0KICAgIAogICAgaWYgbm90IGNvbmZpZ19maWxlczoKICAgICAgICBwcmludChmIumUmeivrzog6YWN572u5paH5Lu255uu5b2VIHtjb25maWdfZGlyfSDkuK3msqHmnInmib7liLDmlK/mjIHnmoTphY3nva7mlofku7YiKQogICAgICAgIHJldHVybgogICAgCiAgICBwcmludCgiW+mFjee9ruaWh+S7tuWIl+ihqF0g6K+36YCJ5oup6YWN572u5paH5Lu277yaIikKICAgIGZvciBpLCBjb25maWdfZmlsZSBpbiBlbnVtZXJhdGUoY29uZmlnX2ZpbGVzLCBzdGFydD0xKToKICAgICAgICBwcmludChmIntpfS4ge2NvbmZpZ19maWxlfSIpCiAgICAKICAgIHdoaWxlIFRydWU6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBjaG9pY2UgPSBpbnQoaW5wdXQoIuivt+i+k+WFpemFjee9ruaWh+S7tue8luWPtzogIikpCiAgICAgICAgICAgIGlmIGNob2ljZSA8IDEgb3IgY2hvaWNlID4gbGVuKGNvbmZpZ19maWxlcyk6CiAgICAgICAgICAgICAgICBwcmludCgi6ZSZ6K+vOiDpgInmi6nml6DmlYjvvIzor7fph43mlrDpgInmi6kiKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICAgICAgcHJpbnQoIumUmeivrzog6L6T5YWl5peg5pWI77yM6K+36L6T5YWl5pWw5a2XIikKICAgIAogICAgY29uZmlnX2ZpbGVfcGF0aCA9IG9zLnBhdGguam9pbihjb25maWdfZGlyLCBjb25maWdfZmlsZXNbY2hvaWNlIC0gMV0pCgogICAgY29uZmlnX2RhdGEgPSBwcm9jZXNzX2NvbmZpZ19maWxlKGNvbmZpZ19maWxlX3BhdGgpCiAgICBpZiBub3QgY29uZmlnX2RhdGE6CiAgICAgICAgcHJpbnQoIumUmeivrzog6YWN572u5paH5Lu25aSE55CG5aSx6LSlIikKICAgICAgICByZXR1cm4KCiAgICB0b3RhbF9wYWlycyA9IHRvdGFsX2ZvdW5kID0gdG90YWxfbm90X2ZvdW5kID0gMAoKICAgIHByaW50X3N0YXR1c191cGRhdGUoIuW8gOWni+WkhOeQhuaWh+S7ti4uLuivt+eojeWAmSIpCgogICAgZm9yIHJvb3QsIGRpcnMsIGZpbGVzIGluIG9zLndhbGsodGFyZ2V0X2Rpcik6CiAgICAgICAgZm9yIGZpbGVuYW1lIGluIGZpbGVzOgogICAgICAgICAgICBpZiBmaWxlbmFtZS5lbmRzd2l0aCgoJy5kYXQnLCAnLnVleHAnKSk6CiAgICAgICAgICAgICAgICB0YXJnZXRfZmlsZV9wYXRoID0gb3MucGF0aC5qb2luKHJvb3QsIGZpbGVuYW1lKQogICAgICAgICAgICAgICAgcGFpcnMsIGZvdW5kLCBub3RfZm91bmQgPSBwcm9jZXNzX3RhcmdldF9maWxlcyhjb25maWdfZGF0YSwgdGFyZ2V0X2ZpbGVfcGF0aCkKICAgICAgICAgICAgICAgIHRvdGFsX3BhaXJzICs9IHBhaXJzCiAgICAgICAgICAgICAgICB0b3RhbF9mb3VuZCArPSBmb3VuZAogICAgICAgICAgICAgICAgdG90YWxfbm90X2ZvdW5kICs9IG5vdF9mb3VuZAoKICAgIHByaW50KGYiXG5b5aSE55CG5a6M5oiQXSDkuIDlhbEge3RvdGFsX3BhaXJzfSDlr7nvvIzmiJDlip/kv67mlLk6IHt0b3RhbF9mb3VuZH0g5a+577yM5pyq5om+5YiwOiB7dG90YWxfbm90X2ZvdW5kfSDlr7lcbiIpCiAgICBwcmludCgiW+S7u+WKoeWujOaIkF0g5bey5oiQ5Yqf5aSE55CG5paH5Lu244CCIikKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICBtYWluKCk="
decoded_script = base64.b64decode(encoded_script).decode('utf-8')

exec(decoded_script)
